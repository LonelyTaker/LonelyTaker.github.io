<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>axios | LonelyTaker&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="一、基础知识请求1234行:GET url HTTP&#x2F;1.1头:Content-Type:application&#x2F;x-www-form-urlencoded空行体:...  响应1234行:HTTP&#x2F;1.1 200 OK头:Content-Type: text&#x2F;plain; charset&#x3D;UTF-8空行体:...    二、Axios1.使用方法1234567891011121314&#x2F;&#x2F; 基本使">
<meta property="og:type" content="article">
<meta property="og:title" content="axios">
<meta property="og:url" content="http://example.com/2022/01/24/axios/index.html">
<meta property="og:site_name" content="LonelyTaker&#39;s Blog">
<meta property="og:description" content="一、基础知识请求1234行:GET url HTTP&#x2F;1.1头:Content-Type:application&#x2F;x-www-form-urlencoded空行体:...  响应1234行:HTTP&#x2F;1.1 200 OK头:Content-Type: text&#x2F;plain; charset&#x3D;UTF-8空行体:...    二、Axios1.使用方法1234567891011121314&#x2F;&#x2F; 基本使">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-01-24T02:08:20.000Z">
<meta property="article:modified_time" content="2022-01-24T02:08:36.401Z">
<meta property="article:author" content="LonelyTaker">
<meta property="article:tag" content="个人博客">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="LonelyTaker's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">LonelyTaker&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-axios" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/01/24/axios/" class="article-date">
  <time class="dt-published" datetime="2022-01-24T02:08:20.000Z" itemprop="datePublished">2022-01-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      axios
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="一、基础知识"><a href="#一、基础知识" class="headerlink" title="一、基础知识"></a>一、基础知识</h1><h2 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">行:GET url HTTP/<span class="number">1.1</span></span><br><span class="line">头:Content-Type:application/x-www-form-urlencoded</span><br><span class="line">空行</span><br><span class="line">体:...</span><br></pre></td></tr></table></figure>

<h2 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">行:HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">头:Content-Type: text/plain; charset=UTF-<span class="number">8</span></span><br><span class="line">空行</span><br><span class="line">体:...</span><br></pre></td></tr></table></figure>



<h1 id="二、Axios"><a href="#二、Axios" class="headerlink" title="二、Axios"></a>二、Axios</h1><h2 id="1-使用方法"><a href="#1-使用方法" class="headerlink" title="1.使用方法"></a>1.使用方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本使用</span></span><br><span class="line">axios(&#123;</span><br><span class="line">    <span class="attr">method</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>:&#123;&#125;</span><br><span class="line">&#125;).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;).catche(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 其他方式</span></span><br><span class="line">axios.request(config)</span><br><span class="line">axios.get(url,&#123;<span class="attr">params</span>:OBJECT&#125;)</span><br><span class="line">axios.post(url,OBJECT)</span><br></pre></td></tr></table></figure>

<h2 id="2-axios请求响应结果"><a href="#2-axios请求响应结果" class="headerlink" title="2.axios请求响应结果"></a>2.axios请求响应结果</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">config</span>:,		<span class="comment">// 请求配置</span></span><br><span class="line">    data:,			<span class="comment">// 响应体</span></span><br><span class="line">    headers:,		<span class="comment">// 响应头</span></span><br><span class="line">    request:,		<span class="comment">// 原生AJAX请求对象</span></span><br><span class="line">    status:,		<span class="comment">// 响应状态码</span></span><br><span class="line">    statusText:<span class="string">&#x27;&#x27;</span>	<span class="comment">// 响应状态字符串</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-axios配置对象"><a href="#3-axios配置对象" class="headerlink" title="3.axios配置对象"></a>3.axios配置对象</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  	<span class="comment">// `url` 是用于请求的服务器 URL</span></span><br><span class="line">	<span class="attr">url</span>: <span class="string">&quot;/user&quot;</span>,</span><br><span class="line">      </span><br><span class="line">  	<span class="comment">// `method` 是创建请求时使用的方法</span></span><br><span class="line">	<span class="attr">method</span>: <span class="string">&quot;get&quot;</span>, <span class="comment">// 默认是 get</span></span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `baseURL` 将自动加在 `url` 前面，除非 `url` 是一个绝对 URL。</span></span><br><span class="line">  	<span class="comment">// 它可以通过设置一个 `baseURL` 便于为 axios 实例的方法传递相对 URL</span></span><br><span class="line">  	<span class="attr">baseURL</span>: <span class="string">&quot;https://some-domain.com/api/&quot;</span>,</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `transformRequest` 允许在向服务器发送前，修改请求数据</span></span><br><span class="line">  	<span class="comment">// 只能用在 &quot;PUT&quot;, &quot;POST&quot; 和 &quot;PATCH&quot; 这几个请求方法</span></span><br><span class="line">  	<span class="comment">// 后面数组中的函数必须返回一个字符串，或 ArrayBuffer，或 Stream</span></span><br><span class="line">  	<span class="attr">transformRequest</span>: [<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    	<span class="comment">// 对 data 进行任意转换处理</span></span><br><span class="line">    	<span class="keyword">return</span> data;</span><br><span class="line"> 	&#125;],</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `transformResponse` 在传递给 then/catch 前，允许修改响应数据</span></span><br><span class="line">  	<span class="attr">transformResponse</span>: [<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    	<span class="comment">// 对 data 进行任意转换处理</span></span><br><span class="line">    	<span class="keyword">return</span> data;</span><br><span class="line">  	&#125;],</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `headers` 是即将被发送的自定义请求头</span></span><br><span class="line">  	<span class="attr">headers</span>: &#123;<span class="string">&quot;X-Requested-With&quot;</span>: <span class="string">&quot;XMLHttpRequest&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `params` 是即将与请求一起发送的 URL 参数</span></span><br><span class="line">  	<span class="comment">// 必须是一个无格式对象(plain object)或 URLSearchParams 对象</span></span><br><span class="line">  	<span class="attr">params</span>: &#123;</span><br><span class="line">    	<span class="attr">ID</span>: <span class="number">12345</span></span><br><span class="line">  	&#125;,</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `paramsSerializer` 是一个负责 `params` 序列化的函数</span></span><br><span class="line">  	<span class="attr">paramsSerializer</span>: <span class="function"><span class="keyword">function</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">    	<span class="keyword">return</span> Qs.stringify(params, &#123;<span class="attr">arrayFormat</span>: <span class="string">&quot;brackets&quot;</span>&#125;)</span><br><span class="line">  	&#125;,</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `data` 是作为请求主体被发送的数据</span></span><br><span class="line">  	<span class="comment">// 只适用于这些请求方法 &quot;PUT&quot;, &quot;POST&quot;, 和 &quot;PATCH&quot;</span></span><br><span class="line">  	<span class="comment">// 在没有设置 `transformRequest` 时，必须是以下类型之一：</span></span><br><span class="line">  	<span class="comment">// - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span></span><br><span class="line">  	<span class="comment">// - 浏览器专属：FormData, File, Blob</span></span><br><span class="line">  	<span class="comment">// - Node 专属： Stream</span></span><br><span class="line">  	<span class="attr">data</span>: &#123;</span><br><span class="line">    	<span class="attr">firstName</span>: <span class="string">&quot;Fred&quot;</span></span><br><span class="line">  	&#125;,</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `timeout` 指定请求超时的毫秒数(0 表示无超时时间)</span></span><br><span class="line">  	<span class="comment">// 如果请求话费了超过 `timeout` 的时间，请求将被中断</span></span><br><span class="line">  	<span class="attr">timeout</span>: <span class="number">1000</span>,</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `withCredentials` 表示跨域请求时是否需要使用凭证</span></span><br><span class="line">  	<span class="attr">withCredentials</span>: <span class="literal">false</span>, <span class="comment">// 默认</span></span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `adapter` 允许自定义处理请求，以使测试更轻松</span></span><br><span class="line">  	<span class="comment">// 返回一个 promise 并应用一个有效的响应 (查阅 [response docs](#response-api)).</span></span><br><span class="line">  	<span class="attr">adapter</span>: <span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;&#125;,</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `auth` 表示应该使用 HTTP 基础验证，并提供凭据</span></span><br><span class="line">  	<span class="comment">// 这将设置一个 `Authorization` 头，覆写掉现有的任意使用 `headers` 设置的自定义`Authorization`头</span></span><br><span class="line">  	<span class="attr">auth</span>: &#123;</span><br><span class="line">    	<span class="attr">username</span>: <span class="string">&quot;janedoe&quot;</span>,</span><br><span class="line">    	<span class="attr">password</span>: <span class="string">&quot;s00pers3cret&quot;</span></span><br><span class="line">  	&#125;,</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `responseType` 表示服务器响应的数据类型，可以是&quot;arraybuffer&quot;,&quot;blob&quot;,&quot;document&quot;,&quot;json&quot;,&quot;text&quot;,&quot;stream&quot;</span></span><br><span class="line">  	<span class="attr">responseType</span>: <span class="string">&quot;json&quot;</span>, <span class="comment">// 默认</span></span><br><span class="line">      </span><br><span class="line">  	<span class="comment">// `responseEncoding` 表示用于解码响应的编码</span></span><br><span class="line">  	<span class="attr">responseEncoding</span>:<span class="string">&#x27;utf8&#x27;</span>,	<span class="comment">// 默认</span></span><br><span class="line">      </span><br><span class="line">  	<span class="comment">// `xsrfCookieName` 是用作 xsrf token 的值的cookie的名称</span></span><br><span class="line">  	<span class="attr">xsrfCookieName</span>: <span class="string">&quot;XSRF-TOKEN&quot;</span>, <span class="comment">// 默认</span></span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `xsrfHeaderName` 是承载 xsrf token 的值的 HTTP 头的名称</span></span><br><span class="line">  	<span class="attr">xsrfHeaderName</span>: <span class="string">&quot;X-XSRF-TOKEN&quot;</span>, <span class="comment">// 默认</span></span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `onUploadProgress` 允许为上传处理进度事件</span></span><br><span class="line">  	<span class="attr">onUploadProgress</span>: <span class="function"><span class="keyword">function</span> (<span class="params">progressEvent</span>) </span>&#123;</span><br><span class="line">    	<span class="comment">// 对原生进度事件的处理</span></span><br><span class="line">  	&#125;,</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `onDownloadProgress` 允许为下载处理进度事件</span></span><br><span class="line">  	<span class="attr">onDownloadProgress</span>: <span class="function"><span class="keyword">function</span> (<span class="params">progressEvent</span>) </span>&#123;</span><br><span class="line">    	<span class="comment">// 对原生进度事件的处理</span></span><br><span class="line">  	&#125;,</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `maxContentLength` 定义允许的响应内容的最大尺寸</span></span><br><span class="line">  	<span class="attr">maxContentLength</span>: <span class="number">2000</span>,</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `validateStatus` 定义对于给定的HTTP 响应状态码是 resolve 或 reject  promise</span></span><br><span class="line">  	<span class="comment">// 如果 `validateStatus` 返回 `true` (或者设置为 `null`或 `undefined`)，promise 将被 resolve; 否则，promise 将被 rejecte</span></span><br><span class="line">  	<span class="attr">validateStatus</span>: <span class="function"><span class="keyword">function</span> (<span class="params">status</span>) </span>&#123;</span><br><span class="line">    	<span class="keyword">return</span> status &gt;= <span class="number">200</span> &amp;&amp; status &lt; <span class="number">300</span>; <span class="comment">// 默认</span></span><br><span class="line">  	&#125;,</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `maxRedirects` 定义在 node.js 中 follow 的最大重定向数目</span></span><br><span class="line">  	<span class="comment">// 如果设置为0，将不会 follow 任何重定向</span></span><br><span class="line">  	<span class="attr">maxRedirects</span>: <span class="number">5</span>, <span class="comment">// 默认</span></span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `httpAgent` 和 `httpsAgent` 分别在 node.js 中用于定义在执行 http 和 https 时使用的自定义代理。允许像这样配置选项：</span></span><br><span class="line">  	<span class="comment">// `keepAlive` 默认没有启用</span></span><br><span class="line">  	<span class="attr">httpAgent</span>: <span class="keyword">new</span> http.Agent(&#123; <span class="attr">keepAlive</span>: <span class="literal">true</span> &#125;),</span><br><span class="line">  	<span class="attr">httpsAgent</span>: <span class="keyword">new</span> https.Agent(&#123; <span class="attr">keepAlive</span>: <span class="literal">true</span> &#125;),</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// &quot;proxy&quot; 定义代理服务器的主机名称和端口</span></span><br><span class="line">  	<span class="comment">// `auth` 表示 HTTP 基础验证应当用于连接代理，并提供凭据</span></span><br><span class="line">  	<span class="comment">// 这将会设置一个 `Proxy-Authorization` 头，覆写掉已有的通过使用 `header` 设置的自定义 `Proxy-Authorization` 头。</span></span><br><span class="line">  	<span class="attr">proxy</span>: &#123;</span><br><span class="line">    	<span class="attr">host</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">    	<span class="attr">port</span>: <span class="number">9000</span>,</span><br><span class="line">    	<span class="attr">auth</span>: : &#123;</span><br><span class="line">      		<span class="attr">username</span>: <span class="string">&quot;mikeymike&quot;</span>,</span><br><span class="line">      		<span class="attr">password</span>: <span class="string">&quot;rapunz3l&quot;</span></span><br><span class="line">    	&#125;</span><br><span class="line">  	&#125;,</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// `cancelToken` 指定用于取消请求的 cancel token</span></span><br><span class="line">  	<span class="attr">cancelToken</span>: <span class="keyword">new</span> CancelToken(<span class="function"><span class="keyword">function</span> (<span class="params">cancel</span>) </span>&#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-axios修改默认配置"><a href="#4-axios修改默认配置" class="headerlink" title="4.axios修改默认配置"></a>4.axios修改默认配置</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.method = <span class="string">&#x27;GET&#x27;</span>	<span class="comment">// 设置默认请求类型</span></span><br><span class="line">axios.defaults.baseURIL = <span class="string">&#x27;&#x27;</span>	<span class="comment">// 设置基础URL</span></span><br><span class="line">axios.defaults.timeout = <span class="number">3000</span>	<span class="comment">// 设置默认超时时间</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h2 id="5-axios创建实例对象发送请求"><a href="#5-axios创建实例对象发送请求" class="headerlink" title="5.axios创建实例对象发送请求"></a>5.axios创建实例对象发送请求</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建实例对象</span></span><br><span class="line"><span class="keyword">const</span> temp = axios.create(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">timeout</span>:<span class="number">2000</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 这里的temp和axios对象几近是一样的</span></span><br><span class="line">temp(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 作用：对于不同的请求接口，需要传的请求头不同或者请求域名不同，此时需要一个新的axios实例进行请求</span></span><br></pre></td></tr></table></figure>

<h2 id="6-拦截器"><a href="#6-拦截器" class="headerlink" title="6.拦截器"></a>6.拦截器</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求拦截器</span></span><br><span class="line"><span class="comment">// 作用：在发送请求前对发送的数据内容进行检测</span></span><br><span class="line">axios.interceptors.request.use(<span class="function"><span class="keyword">function</span>(<span class="params">config</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line"><span class="comment">// 作用：当服务器返回结果后，在处理结果之前对结果进行预处理</span></span><br><span class="line">axios.interceptors.response.use(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="7-取消请求"><a href="#7-取消请求" class="headerlink" title="7.取消请求"></a>7.取消请求</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2.声明全局变量</span></span><br><span class="line"><span class="keyword">let</span> cancel = <span class="literal">null</span></span><br><span class="line">axios(&#123;</span><br><span class="line">    <span class="attr">method</span>:<span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="comment">// 1.添加配置对象对象的属性</span></span><br><span class="line">    <span class="attr">cancelToken</span>: <span class="keyword">new</span> axios.CancelToken(<span class="function"><span class="keyword">function</span>(<span class="params">c</span>)</span>&#123;</span><br><span class="line">        <span class="comment">// 3.将 c 的值赋值给cancel</span></span><br><span class="line">        cancel = c</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.取消请求</span></span><br><span class="line">cancel()</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/01/24/axios/" data-id="ckys1yadc0000xkvm2p5r97gs" data-title="axios" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/01/24/webpack/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          webpack
        
      </div>
    </a>
  
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/01/24/webpack/">webpack</a>
          </li>
        
          <li>
            <a href="/2022/01/24/axios/">axios</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 LonelyTaker<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>